<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Log GPS</title>
</head>
<body>
<h2>üìç Enregistrement de position GPS</h2>
<p id="status">R√©cup√©ration de la position en cours...</p>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbzCLg85CklTcxQ5MwsR2_9fqr_GYwoi2NCpRiEhiHDPzv92C7zNqX5XRkbgG0j6L7fP/exec"; // <-- remplace ici

function logPosition(position) {
const data = {
latitude: position.coords.latitude,
longitude: position.coords.longitude,
accuracy: position.coords.accuracy
};

fetch(scriptURL, {
method: "POST",
body: JSON.stringify(data)
})
.then(() => {
document.getElementById("status").textContent =
`‚úÖ Position enregistr√©e √† ${new Date().toLocaleString()}`;
})
.catch((error) => {
document.getElementById("status").textContent = "‚ùå Erreur : " + error;
});
}

function error(err) {
document.getElementById("status").textContent =
`‚ö†Ô∏è Erreur GPS (${err.code}): ${err.message}`;
}

if ("geolocation" in navigator) {
navigator.geolocation.getCurrentPosition(logPosition, error, { enableHighAccuracy: true });
} else {
document.getElementById("status").textContent = "üö´ G√©olocalisation non support√©e.";
}
</script>
</body>
</html>
